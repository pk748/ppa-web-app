(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@angular/core'), require('chart.js')) :
    typeof define === 'function' && define.amd ? define('ng-chartjs', ['exports', '@angular/core', 'chart.js'], factory) :
    (factory((global['ng-chartjs'] = {}),global.ng.core,null));
}(this, (function (exports,i0,chart_js) { 'use strict';

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var StoreService = (function () {
        function StoreService() {
            this._chartInstances = [];
            this._chartId = [];
        }
        /**
         * @param {?} id
         * @param {?} chart
         * @return {?}
         */
        StoreService.prototype.addChart = /**
         * @param {?} id
         * @param {?} chart
         * @return {?}
         */
            function (id, chart) {
                for (var i = 0; i < this._chartId.length; i++) {
                    if (id === this._chartId[i]) {
                        return;
                    }
                }
                this._chartId.push(id);
                this._chartInstances.push(chart);
            };
        /**
         * @param {?} id
         * @return {?}
         */
        StoreService.prototype.removeChart = /**
         * @param {?} id
         * @return {?}
         */
            function (id) {
                for (var i = 0; i < this._chartId.length; i++) {
                    if (id === this._chartId[i]) {
                        this._chartId.splice(i, 1);
                        this._chartInstances.splice(i, 1); // delete chart instance.
                    }
                }
            };
        /**
         * @param {?} id
         * @return {?}
         */
        StoreService.prototype.getChart = /**
         * @param {?} id
         * @return {?}
         */
            function (id) {
                for (var i = 0; i < this._chartId.length; i++) {
                    if (id === this._chartId[i]) {
                        return this._chartInstances[i];
                    }
                }
                return null;
            };
        StoreService.decorators = [
            { type: i0.Injectable, args: [{
                        providedIn: 'root'
                    },] },
        ];
        /** @nocollapse */ StoreService.ngInjectableDef = i0.defineInjectable({ factory: function StoreService_Factory() { return new StoreService(); }, token: StoreService, providedIn: "root" });
        return StoreService;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /** @type {?} */
    var NgChartjsDefaultPluginToken = new i0.InjectionToken('[ngx-chart-js] Global Default Plugin');
    /** @type {?} */
    var NgChartjsCustomPluginToken = new i0.InjectionToken('[ngx-chart-js] Global Custom Plugin');

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var PluginConfig = (function () {
        function PluginConfig(plugins) {
            if (plugins === void 0) {
                plugins = [];
            }
            this._plugins = plugins;
        }
        Object.defineProperty(PluginConfig.prototype, "plugins", {
            get: /**
             * @return {?}
             */ function () {
                return this._plugins;
            },
            enumerable: true,
            configurable: true
        });
        return PluginConfig;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var NgChartjsService = (function () {
        function NgChartjsService(pluginConfig, storeService) {
            this.pluginConfig = pluginConfig;
            this.storeService = storeService;
            this.plugins = pluginConfig.plugins;
            if (this.plugins.length !== 0 || this.plugins) {
                for (var i = 0; i < this.plugins.length; i++) {
                    if (this.plugins[i]) {
                        chart_js.Chart.plugins.register(this.plugins[i]);
                    }
                }
            }
        }
        // get chart instance by id
        /**
         * @param {?} id
         * @return {?}
         */
        NgChartjsService.prototype.getChart = /**
         * @param {?} id
         * @return {?}
         */
            function (id) {
                return this.storeService.getChart(id);
            };
        NgChartjsService.decorators = [
            { type: i0.Injectable, args: [{
                        providedIn: 'root'
                    },] },
        ];
        /** @nocollapse */
        NgChartjsService.ctorParameters = function () {
            return [
                { type: PluginConfig, decorators: [{ type: i0.Inject, args: [i0.forwardRef(function () { return NgChartjsCustomPluginToken; }),] }] },
                { type: StoreService }
            ];
        };
        /** @nocollapse */ NgChartjsService.ngInjectableDef = i0.defineInjectable({ factory: function NgChartjsService_Factory() { return new NgChartjsService(i0.inject(NgChartjsCustomPluginToken), i0.inject(StoreService)); }, token: NgChartjsService, providedIn: "root" });
        return NgChartjsService;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /** @type {?} */
    var DefaultColors = [
        [63, 81, 181],
        // Indogo
        [233, 30, 99],
        // Pink
        [156, 39, 176],
        // Purple
        [0, 188, 212],
        // Cyan
        [3, 169, 244],
        // Light Blue
        [0, 150, 136],
        // Teal
        [255, 152, 0],
        // Orange
        [96, 125, 139],
        // Blue Grey
        [255, 193, 7],
        // Amber
        [37, 155, 36],
        // Green
        [205, 220, 57],
        // Lime
        [86, 119, 252] // Blue
    ];
    /**
     * @param {?} colour
     * @param {?} alpha
     * @return {?}
     */
    function rgba(colour, alpha) {
        return 'rgba(' + colour.concat(alpha).join(',') + ')';
    }
    /**
     * @param {?} min
     * @param {?} max
     * @return {?}
     */
    function getRandomInt(min, max) {
        return Math.floor(Math.random() * (max - min + 1)) + min;
    }
    /**
     * @param {?} colors
     * @return {?}
     */
    function formatLineColor(colors) {
        return {
            backgroundColor: rgba(colors, 0.4),
            borderColor: rgba(colors, 1),
            pointBackgroundColor: rgba(colors, 1),
            pointBorderColor: '#fff',
            pointHoverBackgroundColor: '#fff',
            pointHoverBorderColor: rgba(colors, 0.8)
        };
    }
    /**
     * @param {?} colors
     * @return {?}
     */
    function formatBarColor(colors) {
        return {
            backgroundColor: rgba(colors, 0.6),
            borderColor: rgba(colors, 1),
            hoverBackgroundColor: rgba(colors, 0.8),
            hoverBorderColor: rgba(colors, 1)
        };
    }
    /**
     * @param {?} colors
     * @return {?}
     */
    function formatPieColors(colors) {
        return {
            backgroundColor: colors.map(function (color) { return rgba(color, 0.6); }),
            borderColor: colors.map(function () { return '#fff'; }),
            pointBackgroundColor: colors.map(function (color) { return rgba(color, 1); }),
            pointBorderColor: colors.map(function () { return '#fff'; }),
            pointHoverBackgroundColor: colors.map(function (color) { return rgba(color, 1); }),
            pointHoverBorderColor: colors.map(function (color) { return rgba(color, 1); })
        };
    }
    /**
     * @param {?} colors
     * @return {?}
     */
    function formatPolarAreaColors(colors) {
        return {
            backgroundColor: colors.map(function (color) { return rgba(color, 0.6); }),
            borderColor: colors.map(function (color) { return rgba(color, 1); }),
            hoverBackgroundColor: colors.map(function (color) { return rgba(color, 0.8); }),
            hoverBorderColor: colors.map(function (color) { return rgba(color, 1); })
        };
    }
    /**
     * @return {?}
     */
    function getRandomColor() {
        return [getRandomInt(0, 255), getRandomInt(0, 255), getRandomInt(0, 255)];
    }
    /**
     * @param {?} index
     * @return {?}
     */
    function generateColor(index) {
        return DefaultColors[index] || getRandomColor();
    }
    /**
     * @param {?} count
     * @return {?}
     */
    function generateColors(count) {
        /** @type {?} */
        var colorsArr = new Array(count);
        for (var i = 0; i < count; i++) {
            colorsArr[i] = DefaultColors[i] || getRandomColor();
        }
        return colorsArr;
    }
    /**
     * @param {?} chartType
     * @param {?} index
     * @param {?} count
     * @return {?}
     */
    function getColors(chartType, index, count) {
        if (chartType === 'pie' || chartType === 'doughnut') {
            return formatPieColors(generateColors(count));
        }
        if (chartType === 'polarArea') {
            return formatPolarAreaColors(generateColors(count));
        }
        if (chartType === 'line' || chartType === 'radar') {
            return formatLineColor(generateColor(index));
        }
        if (chartType === 'bar' || chartType === 'horizontalBar') {
            return formatBarColor(generateColor(index));
        }
        return generateColor(index);
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var NgChartjsDirective = (function () {
        function NgChartjsDirective(element, ngChartjsService, storeService) {
            this.ngChartjsService = ngChartjsService;
            this.storeService = storeService;
            // x轴标签。这对图表来说是必要的：线，条和雷达。并且只是图表的标签（悬停）：polarArea，pie和doughnut
            this.labels = [];
            // 相当于chart.js的option
            this.options = {};
            // 鼠标点击图表所有的区域
            this.chartClick = new i0.EventEmitter();
            // 鼠标悬浮在标签或者活跃的点上面时
            this.chartHover = new i0.EventEmitter();
            this.initFlag = false;
            this.hasChanges = false;
            this.element = element; // 获取指令所在canvas元素
        }
        /**
         * @return {?}
         */
        NgChartjsDirective.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
                this.ctx = this.element.nativeElement.getContext('2d'); // 获取元素的ctx
                this.cvs = this.element.nativeElement; // 获取这个元素
                this.initFlag = true; // 是否初始化了的标志
                if (this.data || this.datasets) {
                    // 判断data和datasets有一个有数据就刷新
                    this.refresh();
                }
            };
        /**
         * @param {?} changes
         * @return {?}
         */
        NgChartjsDirective.prototype.ngOnChanges = /**
         * @param {?} changes
         * @return {?}
         */
            function (changes) {
                // TODO: 插件变化刷新，开放刷新按钮
                if (this.initFlag) {
                    // Check if the changes are in the data or datasets
                    if (changes.hasOwnProperty('data') || changes.hasOwnProperty('datasets')) {
                        if (changes["data"]) {
                            this.updateChartData(changes["data"].currentValue);
                        }
                        else {
                            this.updateChartData(changes["datasets"].currentValue);
                        }
                        this.hasChanges = true;
                    }
                    if (changes.hasOwnProperty('labels')) {
                        this.chart.data.labels = changes["labels"].currentValue;
                        this.hasChanges = true;
                    }
                    if (changes.hasOwnProperty('legend')) {
                        if (changes["legend"].currentValue !== changes["legend"].previousValue) {
                            this.chart.options.legend.display = changes["legend"].currentValue;
                            this.hasChanges = true;
                        }
                    }
                    if (changes.hasOwnProperty('adding')) {
                        this.addData(changes["adding"].currentValue.labels, changes["adding"].currentValue.data);
                        this.hasChanges = true;
                    }
                    if (changes.hasOwnProperty('removing')) {
                        if (changes["removing"].currentValue.orientation === 'oldest' || changes["removing"].currentValue.orientation === 'latest') {
                            this.removeData(changes["removing"].currentValue.orientation);
                            this.hasChanges = true;
                        }
                    }
                    if (changes.hasOwnProperty('resetOption')) {
                        Object.assign(this.chart.options, changes["resetOption"].currentValue);
                        this.hasChanges = true;
                    }
                    // else {
                    //   // otherwise rebuild the chart
                    //   this.refresh();
                    // }
                    if (this.hasChanges) {
                        this.chart.update();
                        this.hasChanges = false;
                    }
                }
            };
        /**
         * @return {?}
         */
        NgChartjsDirective.prototype.ngOnDestroy = /**
         * @return {?}
         */
            function () {
                if (this.chart) {
                    this.chart.destroy();
                    this.chart = void 0;
                    if (this.element.nativeElement.hasAttribute('id')) {
                        this.storeService.removeChart(this.element.nativeElement.id); // delete chart instance.
                    }
                }
            };
        /**
         * @return {?}
         */
        NgChartjsDirective.prototype.refresh = /**
         * @return {?}
         */
            function () {
                this.ngOnDestroy();
                this.chart = this.getChartBuilder(this.ctx /*, data, this.options*/);
                if (this.element.nativeElement.hasAttribute('id')) {
                    this.storeService.addChart(this.element.nativeElement.id, this.chart);
                }
            };
        /**
         * @param {?} labels
         * @param {?} data
         * @return {?}
         */
        NgChartjsDirective.prototype.addData = /**
         * @param {?} labels
         * @param {?} data
         * @return {?}
         */
            function (labels, data) {
                var _this = this;
                if (labels.length === 0 || data.length === 0) {
                    return;
                }
                // update labels
                labels.forEach(function (label) { _this.chart.data.labels.push(label); });
                this.chart.data.datasets.forEach(function (dataset, index) {
                    if (data[index]) {
                        for (var i = 0; i < data[index].length; i++) {
                            dataset.data.push(data[index][i]);
                        }
                    }
                    else {
                        console.log('The added data does not match the original data');
                        return;
                    }
                });
            };
        /**
         * @param {?} direction
         * @return {?}
         */
        NgChartjsDirective.prototype.removeData = /**
         * @param {?} direction
         * @return {?}
         */
            function (direction) {
                if (direction === 'latest') {
                    this.chart.data.labels.pop();
                    this.chart.data.datasets.forEach(function (dataset) {
                        dataset.data.pop();
                    });
                    return;
                }
                if (direction === 'oldest') {
                    return;
                }
            };
        /**
         * @param {?} newDataValues
         * @return {?}
         */
        NgChartjsDirective.prototype.updateChartData = /**
         * @param {?} newDataValues
         * @return {?}
         */
            function (newDataValues) {
                if (Array.isArray(newDataValues[0].data)) {
                    this.chart.data.datasets.forEach(function (dataset, i) {
                        dataset.data = newDataValues[i].data;
                        if (newDataValues[i].label) {
                            dataset.label = newDataValues[i].label;
                        }
                    });
                }
                else {
                    this.chart.data.datasets[0].data = newDataValues;
                }
            };
        /**
         * @param {?} ctx
         * @return {?}
         */
        NgChartjsDirective.prototype.getChartBuilder = /**
         * @param {?} ctx
         * @return {?}
         */
            function (ctx /*, data:Array<any>, options:any*/) {
                var _this = this;
                /** @type {?} */
                var datasets = this.getDatasets();
                /** @type {?} */
                var options = Object.assign({}, this.options); // 深复制options
                if (this.legend === false) {
                    // 设置options的legend TODO: 后续这个属性去除，直接在options内设置
                    options.legend = { display: false };
                }
                // hock for onHover and onClick events
                options.hover = options.hover || {};
                if (!options.hover.onHover) {
                    options.hover.onHover = function (active) {
                        if (active && !active.length) {
                            return;
                        }
                        _this.chartHover.emit({ active: active });
                    };
                }
                if (!options.onClick) {
                    options.onClick = function (event, active) {
                        _this.chartClick.emit({ event: event, active: active });
                    };
                }
                /** @type {?} */
                var opts = {
                    type: this.chartType,
                    data: {
                        labels: this.labels,
                        datasets: datasets // TODO: 后续更改这个属性名字，否则警告
                    },
                    options: options,
                    // TODO: 后续更改这个属性名字，否则警告
                    plugins: this.inlinePlugins
                };
                return new chart_js.Chart(ctx, opts);
            };
        /**
         * @return {?}
         */
        NgChartjsDirective.prototype.getDatasets = /**
         * @return {?}
         */
            function () {
                var _this = this;
                /** @type {?} */
                var datasets = void 0;
                // in case if datasets is not provided, but data is present
                if (!this.datasets || !this.datasets.length && (this.data && this.data.length)) {
                    if (Array.isArray(this.data[0])) {
                        datasets = ((this.data)).map(function (data, index) {
                            return { data: data, label: _this.labels[index] || "Label " + index };
                        });
                    }
                    else {
                        datasets = [{ data: this.data, label: "Label 0" }];
                    }
                }
                if (this.datasets && this.datasets.length ||
                    (datasets && datasets.length)) {
                    datasets = (this.datasets || datasets)
                        .map(function (elm, index) {
                        /** @type {?} */
                        var newElm = Object.assign({}, elm);
                        if (_this.colors && _this.colors.length) {
                            Object.assign(newElm, _this.colors[index]);
                        }
                        else {
                            Object.assign(newElm, getColors(_this.chartType, index, newElm.data.length));
                        }
                        return newElm;
                    });
                }
                if (!datasets) {
                    throw new Error("ng-charts configuration error,\n      data or datasets field are required to render char " + this.chartType);
                }
                return datasets;
            };
        NgChartjsDirective.decorators = [
            { type: i0.Directive, args: [{ selector: 'canvas[ngChartjs]', exportAs: 'ng-chart-js' },] },
        ];
        /** @nocollapse */
        NgChartjsDirective.ctorParameters = function () {
            return [
                { type: i0.ElementRef },
                { type: NgChartjsService },
                { type: StoreService }
            ];
        };
        NgChartjsDirective.propDecorators = {
            data: [{ type: i0.Input }],
            datasets: [{ type: i0.Input }],
            labels: [{ type: i0.Input }],
            options: [{ type: i0.Input }],
            inlinePlugins: [{ type: i0.Input }],
            chartType: [{ type: i0.Input }],
            colors: [{ type: i0.Input }],
            legend: [{ type: i0.Input }],
            adding: [{ type: i0.Input }],
            removing: [{ type: i0.Input }],
            resetOption: [{ type: i0.Input }],
            chartClick: [{ type: i0.Output }],
            chartHover: [{ type: i0.Output }]
        };
        return NgChartjsDirective;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /**
     * @param {?} plugins
     * @return {?}
     */
    function ngChartjsCustomPluginsFactory(plugins) {
        return new PluginConfig(plugins);
    }
    /**
     * @return {?}
     */
    function ngChartjsDefaultPluginsFactory() {
        return new PluginConfig([]);
    }
    var NgChartjsModule = (function () {
        function NgChartjsModule() {
        }
        /**
         * Register a plugin.
         * @param {?=} plugins
         * @return {?}
         */
        NgChartjsModule.registerPlugin = /**
         * Register a plugin.
         * @param {?=} plugins
         * @return {?}
         */
            function (plugins) {
                if (plugins === void 0) {
                    plugins = [];
                }
                return {
                    ngModule: NgChartjsModule,
                    providers: [
                        {
                            provide: NgChartjsDefaultPluginToken,
                            useValue: plugins
                        },
                        {
                            deps: [NgChartjsDefaultPluginToken],
                            provide: NgChartjsCustomPluginToken,
                            useFactory: ngChartjsCustomPluginsFactory
                        }
                    ]
                };
            };
        NgChartjsModule.decorators = [
            { type: i0.NgModule, args: [{
                        imports: [],
                        declarations: [NgChartjsDirective],
                        exports: [NgChartjsDirective],
                        providers: [
                            {
                                provide: NgChartjsCustomPluginToken,
                                useFactory: ngChartjsDefaultPluginsFactory
                            }
                        ]
                    },] },
        ];
        return NgChartjsModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */

    exports.NgChartjsDirective = NgChartjsDirective;
    exports.ngChartjsCustomPluginsFactory = ngChartjsCustomPluginsFactory;
    exports.ngChartjsDefaultPluginsFactory = ngChartjsDefaultPluginsFactory;
    exports.NgChartjsModule = NgChartjsModule;
    exports.NgChartjsService = NgChartjsService;
    exports.ɵb = NgChartjsCustomPluginToken;
    exports.ɵa = NgChartjsDefaultPluginToken;
    exports.ɵc = PluginConfig;
    exports.ɵd = StoreService;

    Object.defineProperty(exports, '__esModule', { value: true });

})));

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmctY2hhcnRqcy51bWQuanMubWFwIiwic291cmNlcyI6WyJuZzovL25nLWNoYXJ0anMvbGliL3N0b3JlLnNlcnZpY2UudHMiLCJuZzovL25nLWNoYXJ0anMvbGliL3BsdWdpbi10b2tlbi50cyIsIm5nOi8vbmctY2hhcnRqcy9saWIvcGx1Z2luc0NvbmZpZy50cyIsIm5nOi8vbmctY2hhcnRqcy9saWIvbmctY2hhcnRqcy5zZXJ2aWNlLnRzIiwibmc6Ly9uZy1jaGFydGpzL2xpYi9jb2xvcnMudHMiLCJuZzovL25nLWNoYXJ0anMvbGliL25nLWNoYXJ0anMuZGlyZWN0aXZlLnRzIiwibmc6Ly9uZy1jaGFydGpzL2xpYi9uZy1jaGFydGpzLm1vZHVsZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbkBJbmplY3RhYmxlKHtcbiAgcHJvdmlkZWRJbjogJ3Jvb3QnXG59KVxuZXhwb3J0IGNsYXNzIFN0b3JlU2VydmljZSB7XG4gIHByaXZhdGUgX2NoYXJ0SW5zdGFuY2VzOiBhbnlbXSA9IFtdO1xuICBwcml2YXRlIF9jaGFydElkOiBzdHJpbmdbXSA9IFtdO1xuXG4gIGFkZENoYXJ0KGlkOiBzdHJpbmcsIGNoYXJ0OiBhbnkpOiB2b2lkIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX2NoYXJ0SWQubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChpZCA9PT0gdGhpcy5fY2hhcnRJZFtpXSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuX2NoYXJ0SWQucHVzaChpZCk7XG4gICAgdGhpcy5fY2hhcnRJbnN0YW5jZXMucHVzaChjaGFydCk7XG4gIH1cblxuICByZW1vdmVDaGFydChpZDogc3RyaW5nKTogdm9pZCB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9jaGFydElkLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoaWQgPT09IHRoaXMuX2NoYXJ0SWRbaV0pIHtcbiAgICAgICAgdGhpcy5fY2hhcnRJZC5zcGxpY2UoaSwgMSk7XG4gICAgICAgIHRoaXMuX2NoYXJ0SW5zdGFuY2VzLnNwbGljZShpLCAxKTsgIC8vIGRlbGV0ZSBjaGFydCBpbnN0YW5jZS5cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBnZXRDaGFydChpZDogc3RyaW5nKTogYW55IHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX2NoYXJ0SWQubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChpZCA9PT0gdGhpcy5fY2hhcnRJZFtpXSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2hhcnRJbnN0YW5jZXNbaV07XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG59XG4iLCJpbXBvcnQgeyBJbmplY3Rpb25Ub2tlbiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgUGx1Z2luQ29uZmlnIH0gZnJvbSAnLi9wbHVnaW5zQ29uZmlnJztcblxuZXhwb3J0IGNvbnN0IE5nQ2hhcnRqc0RlZmF1bHRQbHVnaW5Ub2tlbjogSW5qZWN0aW9uVG9rZW48UGx1Z2luQ29uZmlnPlxuICAgID0gbmV3IEluamVjdGlvblRva2VuPFBsdWdpbkNvbmZpZz4oJ1tuZ3gtY2hhcnQtanNdIEdsb2JhbCBEZWZhdWx0IFBsdWdpbicpO1xuXG5leHBvcnQgY29uc3QgTmdDaGFydGpzQ3VzdG9tUGx1Z2luVG9rZW46IEluamVjdGlvblRva2VuPFBsdWdpbkNvbmZpZz5cbiAgICA9IG5ldyBJbmplY3Rpb25Ub2tlbjxQbHVnaW5Db25maWc+KCdbbmd4LWNoYXJ0LWpzXSBHbG9iYWwgQ3VzdG9tIFBsdWdpbicpO1xuIiwiZXhwb3J0IGNsYXNzIFBsdWdpbkNvbmZpZyB7XG4gICAgcHJpdmF0ZSBfcGx1Z2luczogYW55W107XG4gICAgY29uc3RydWN0b3IocGx1Z2luczogYW55W10gPSBbXSkge1xuICAgICAgICB0aGlzLl9wbHVnaW5zID0gcGx1Z2lucztcbiAgICB9XG5cbiAgICBnZXQgcGx1Z2lucygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BsdWdpbnM7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgSW5qZWN0YWJsZSwgSW5qZWN0LCBmb3J3YXJkUmVmIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBDaGFydCB9IGZyb20gJ2NoYXJ0LmpzJztcbmltcG9ydCB7IE5nQ2hhcnRqc0N1c3RvbVBsdWdpblRva2VuIH0gZnJvbSAnLi9wbHVnaW4tdG9rZW4nO1xuaW1wb3J0IHsgUGx1Z2luQ29uZmlnIH0gZnJvbSAnLi9wbHVnaW5zQ29uZmlnJztcbmltcG9ydCB7IFN0b3JlU2VydmljZSB9IGZyb20gJy4vc3RvcmUuc2VydmljZSc7XG5cbkBJbmplY3RhYmxlKHtcbiAgcHJvdmlkZWRJbjogJ3Jvb3QnXG59KVxuZXhwb3J0IGNsYXNzIE5nQ2hhcnRqc1NlcnZpY2Uge1xuXG4gICAgcHJpdmF0ZSBwbHVnaW5zOiBhbnlbXTtcblxuICAgIGNvbnN0cnVjdG9yKEBJbmplY3QoZm9yd2FyZFJlZigoKSA9PiBOZ0NoYXJ0anNDdXN0b21QbHVnaW5Ub2tlbikpIHByaXZhdGUgcGx1Z2luQ29uZmlnOiBQbHVnaW5Db25maWcsXG4gICAgcHJpdmF0ZSBzdG9yZVNlcnZpY2U6IFN0b3JlU2VydmljZSkge1xuICAgICAgdGhpcy5wbHVnaW5zID0gcGx1Z2luQ29uZmlnLnBsdWdpbnM7XG4gICAgICBpZiAodGhpcy5wbHVnaW5zLmxlbmd0aCAhPT0gMCB8fCB0aGlzLnBsdWdpbnMpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnBsdWdpbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAodGhpcy5wbHVnaW5zW2ldKSB7XG4gICAgICAgICAgICBDaGFydC5wbHVnaW5zLnJlZ2lzdGVyKHRoaXMucGx1Z2luc1tpXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIC8vIGdldCBjaGFydCBpbnN0YW5jZSBieSBpZFxuICAgIGdldENoYXJ0KGlkOiBzdHJpbmcpOiBhbnkge1xuICAgICAgcmV0dXJuIHRoaXMuc3RvcmVTZXJ2aWNlLmdldENoYXJ0KGlkKTtcbiAgICB9XG59XG4iLCJleHBvcnQgaW50ZXJmYWNlIENvbG9yIHtcbiAgICBiYWNrZ3JvdW5kQ29sb3I/OiBzdHJpbmcgfCBzdHJpbmdbXTtcbiAgICBib3JkZXJXaWR0aD86IG51bWJlciB8IG51bWJlcltdO1xuICAgIGJvcmRlckNvbG9yPzogc3RyaW5nIHwgc3RyaW5nW107XG4gICAgYm9yZGVyQ2FwU3R5bGU/OiBzdHJpbmc7XG4gICAgYm9yZGVyRGFzaD86IG51bWJlcltdO1xuICAgIGJvcmRlckRhc2hPZmZzZXQ/OiBudW1iZXI7XG4gICAgYm9yZGVySm9pblN0eWxlPzogc3RyaW5nO1xuXG4gICAgcG9pbnRCb3JkZXJDb2xvcj86IHN0cmluZyB8IHN0cmluZ1tdO1xuICAgIHBvaW50QmFja2dyb3VuZENvbG9yPzogc3RyaW5nIHwgc3RyaW5nW107XG4gICAgcG9pbnRCb3JkZXJXaWR0aD86IG51bWJlciB8IG51bWJlcltdO1xuXG4gICAgcG9pbnRSYWRpdXM/OiBudW1iZXIgfCBudW1iZXJbXTtcbiAgICBwb2ludEhvdmVyUmFkaXVzPzogbnVtYmVyIHwgbnVtYmVyW107XG4gICAgcG9pbnRIaXRSYWRpdXM/OiBudW1iZXIgfCBudW1iZXJbXTtcblxuICAgIHBvaW50SG92ZXJCYWNrZ3JvdW5kQ29sb3I/OiBzdHJpbmcgfCBzdHJpbmdbXTtcbiAgICBwb2ludEhvdmVyQm9yZGVyQ29sb3I/OiBzdHJpbmcgfCBzdHJpbmdbXTtcbiAgICBwb2ludEhvdmVyQm9yZGVyV2lkdGg/OiBudW1iZXIgfCBudW1iZXJbXTtcbiAgICBwb2ludFN0eWxlPzogc3RyaW5nIHwgc3RyaW5nW107XG5cbiAgICBob3ZlckJhY2tncm91bmRDb2xvcj86IHN0cmluZyB8IHN0cmluZ1tdO1xuICAgIGhvdmVyQm9yZGVyQ29sb3I/OiBzdHJpbmcgfCBzdHJpbmdbXTtcbiAgICBob3ZlckJvcmRlcldpZHRoPzogbnVtYmVyO1xufVxuXG4vLyBEZWZhdWx0IGNvbG9yc1xuZXhwb3J0IGNvbnN0IERlZmF1bHRDb2xvcnM6IG51bWJlcltdW10gPSBbXG4gICAgWzYzLCA4MSwgMTgxXSwgICAgICAgLy8gSW5kb2dvXG4gICAgWzIzMywgMzAsIDk5XSwgICAgICAgLy8gUGlua1xuICAgIFsxNTYsIDM5LCAxNzZdLCAgICAgIC8vIFB1cnBsZVxuICAgIFswLCAxODgsIDIxMl0sICAgICAgIC8vIEN5YW5cbiAgICBbMywgMTY5LCAyNDRdLCAgICAgICAvLyBMaWdodCBCbHVlXG4gICAgWzAsIDE1MCwgMTM2XSwgICAgICAgLy8gVGVhbFxuICAgIFsyNTUsIDE1MiwgMF0sICAgICAgIC8vIE9yYW5nZVxuICAgIFs5NiwgMTI1LCAxMzldLCAgICAgIC8vIEJsdWUgR3JleVxuICAgIFsyNTUsIDE5MywgN10sICAgICAgIC8vIEFtYmVyXG4gICAgWzM3LCAxNTUsIDM2XSwgICAgICAgLy8gR3JlZW5cbiAgICBbMjA1LCAyMjAsIDU3XSwgICAgICAvLyBMaW1lXG4gICAgWzg2LCAxMTksIDI1Ml0gICAgICAgLy8gQmx1ZVxuXTtcblxuLy8gcGllIHwgZG91Z2hudXRcbmV4cG9ydCBpbnRlcmZhY2UgQ29sb3JzIGV4dGVuZHMgQ29sb3Ige1xuICAgIGRhdGE/OiBudW1iZXJbXTtcbiAgICBsYWJlbD86IHN0cmluZztcbn1cblxuZnVuY3Rpb24gcmdiYShjb2xvdXI6IG51bWJlcltdLCBhbHBoYTogbnVtYmVyKTogc3RyaW5nIHtcbiAgICByZXR1cm4gJ3JnYmEoJyArIGNvbG91ci5jb25jYXQoYWxwaGEpLmpvaW4oJywnKSArICcpJztcbn1cblxuZnVuY3Rpb24gZ2V0UmFuZG9tSW50KG1pbjogbnVtYmVyLCBtYXg6IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4gKyAxKSkgKyBtaW47XG59XG5cbmZ1bmN0aW9uIGZvcm1hdExpbmVDb2xvcihjb2xvcnM6IG51bWJlcltdKTogQ29sb3Ige1xuICAgIHJldHVybiB7XG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogcmdiYShjb2xvcnMsIDAuNCksXG4gICAgICAgIGJvcmRlckNvbG9yOiByZ2JhKGNvbG9ycywgMSksXG4gICAgICAgIHBvaW50QmFja2dyb3VuZENvbG9yOiByZ2JhKGNvbG9ycywgMSksXG4gICAgICAgIHBvaW50Qm9yZGVyQ29sb3I6ICcjZmZmJyxcbiAgICAgICAgcG9pbnRIb3ZlckJhY2tncm91bmRDb2xvcjogJyNmZmYnLFxuICAgICAgICBwb2ludEhvdmVyQm9yZGVyQ29sb3I6IHJnYmEoY29sb3JzLCAwLjgpXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0QmFyQ29sb3IoY29sb3JzOiBudW1iZXJbXSk6IENvbG9yIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IHJnYmEoY29sb3JzLCAwLjYpLFxuICAgICAgICBib3JkZXJDb2xvcjogcmdiYShjb2xvcnMsIDEpLFxuICAgICAgICBob3ZlckJhY2tncm91bmRDb2xvcjogcmdiYShjb2xvcnMsIDAuOCksXG4gICAgICAgIGhvdmVyQm9yZGVyQ29sb3I6IHJnYmEoY29sb3JzLCAxKVxuICAgIH07XG59XG5cbmZ1bmN0aW9uIGZvcm1hdFBpZUNvbG9ycyhjb2xvcnM6IG51bWJlcltdW10pOiBDb2xvcnMge1xuICAgIHJldHVybiB7XG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogY29sb3JzLm1hcCgoY29sb3I6IG51bWJlcltdKSA9PiByZ2JhKGNvbG9yLCAwLjYpKSxcbiAgICAgICAgYm9yZGVyQ29sb3I6IGNvbG9ycy5tYXAoKCkgPT4gJyNmZmYnKSxcbiAgICAgICAgcG9pbnRCYWNrZ3JvdW5kQ29sb3I6IGNvbG9ycy5tYXAoKGNvbG9yOiBudW1iZXJbXSkgPT4gcmdiYShjb2xvciwgMSkpLFxuICAgICAgICBwb2ludEJvcmRlckNvbG9yOiBjb2xvcnMubWFwKCgpID0+ICcjZmZmJyksXG4gICAgICAgIHBvaW50SG92ZXJCYWNrZ3JvdW5kQ29sb3I6IGNvbG9ycy5tYXAoKGNvbG9yOiBudW1iZXJbXSkgPT4gcmdiYShjb2xvciwgMSkpLFxuICAgICAgICBwb2ludEhvdmVyQm9yZGVyQ29sb3I6IGNvbG9ycy5tYXAoKGNvbG9yOiBudW1iZXJbXSkgPT4gcmdiYShjb2xvciwgMSkpXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0UG9sYXJBcmVhQ29sb3JzKGNvbG9yczogbnVtYmVyW11bXSk6IENvbG9yIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGNvbG9ycy5tYXAoKGNvbG9yOiBudW1iZXJbXSkgPT4gcmdiYShjb2xvciwgMC42KSksXG4gICAgICAgIGJvcmRlckNvbG9yOiBjb2xvcnMubWFwKChjb2xvcjogbnVtYmVyW10pID0+IHJnYmEoY29sb3IsIDEpKSxcbiAgICAgICAgaG92ZXJCYWNrZ3JvdW5kQ29sb3I6IGNvbG9ycy5tYXAoKGNvbG9yOiBudW1iZXJbXSkgPT4gcmdiYShjb2xvciwgMC44KSksXG4gICAgICAgIGhvdmVyQm9yZGVyQ29sb3I6IGNvbG9ycy5tYXAoKGNvbG9yOiBudW1iZXJbXSkgPT4gcmdiYShjb2xvciwgMSkpXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gZ2V0UmFuZG9tQ29sb3IoKTogbnVtYmVyW10ge1xuICAgIHJldHVybiBbZ2V0UmFuZG9tSW50KDAsIDI1NSksIGdldFJhbmRvbUludCgwLCAyNTUpLCBnZXRSYW5kb21JbnQoMCwgMjU1KV07XG59XG5cbi8vIEdlbmVyYXRlIGNvbG9ycyBmb3IgbGluZXxiYXIgY2hhcnRzXG5mdW5jdGlvbiBnZW5lcmF0ZUNvbG9yKGluZGV4OiBudW1iZXIpOiBudW1iZXJbXSB7XG4gICAgcmV0dXJuIERlZmF1bHRDb2xvcnNbaW5kZXhdIHx8IGdldFJhbmRvbUNvbG9yKCk7XG59XG5cblxuLy8gR2VuZXJhdGUgY29sb3JzIGZvciBwaWV8ZG91Z2hudXQgY2hhcnRzXG5mdW5jdGlvbiBnZW5lcmF0ZUNvbG9ycyhjb3VudDogbnVtYmVyKTogbnVtYmVyW11bXSB7XG4gICAgY29uc3QgY29sb3JzQXJyOiBudW1iZXJbXVtdID0gbmV3IEFycmF5KGNvdW50KTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50OyBpKyspIHtcbiAgICAgICAgY29sb3JzQXJyW2ldID0gRGVmYXVsdENvbG9yc1tpXSB8fCBnZXRSYW5kb21Db2xvcigpO1xuICAgIH1cbiAgICByZXR1cm4gY29sb3JzQXJyO1xufVxuXG4vLyBHZW5lcmF0ZSBjb2xvcnMgYnkgY2hhcnQgdHlwZVxuZXhwb3J0IGZ1bmN0aW9uIGdldENvbG9ycyhjaGFydFR5cGU6IHN0cmluZywgaW5kZXg6IG51bWJlciwgY291bnQ6IG51bWJlcik6IENvbG9yIHwgbnVtYmVyW10ge1xuICAgIGlmIChjaGFydFR5cGUgPT09ICdwaWUnIHx8IGNoYXJ0VHlwZSA9PT0gJ2RvdWdobnV0Jykge1xuICAgICAgICByZXR1cm4gZm9ybWF0UGllQ29sb3JzKGdlbmVyYXRlQ29sb3JzKGNvdW50KSk7XG4gICAgfVxuXG4gICAgaWYgKGNoYXJ0VHlwZSA9PT0gJ3BvbGFyQXJlYScpIHtcbiAgICAgICAgcmV0dXJuIGZvcm1hdFBvbGFyQXJlYUNvbG9ycyhnZW5lcmF0ZUNvbG9ycyhjb3VudCkpO1xuICAgIH1cblxuICAgIGlmIChjaGFydFR5cGUgPT09ICdsaW5lJyB8fCBjaGFydFR5cGUgPT09ICdyYWRhcicpIHtcbiAgICAgICAgcmV0dXJuIGZvcm1hdExpbmVDb2xvcihnZW5lcmF0ZUNvbG9yKGluZGV4KSk7XG4gICAgfVxuXG4gICAgaWYgKGNoYXJ0VHlwZSA9PT0gJ2JhcicgfHwgY2hhcnRUeXBlID09PSAnaG9yaXpvbnRhbEJhcicpIHtcbiAgICAgICAgcmV0dXJuIGZvcm1hdEJhckNvbG9yKGdlbmVyYXRlQ29sb3IoaW5kZXgpKTtcbiAgICB9XG4gICAgcmV0dXJuIGdlbmVyYXRlQ29sb3IoaW5kZXgpO1xufVxuIiwiaW1wb3J0IHsgU3RvcmVTZXJ2aWNlIH0gZnJvbSAnLi9zdG9yZS5zZXJ2aWNlJztcbmltcG9ydCB7XG4gIE9uRGVzdHJveSxcbiAgT25Jbml0LFxuICBPbkNoYW5nZXMsXG4gIEV2ZW50RW1pdHRlcixcbiAgRWxlbWVudFJlZixcbiAgSW5wdXQsXG4gIE91dHB1dCxcbiAgU2ltcGxlQ2hhbmdlcyxcbiAgRGlyZWN0aXZlXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQ2hhcnQgfSBmcm9tICdjaGFydC5qcyc7XG5cbmltcG9ydCB7IE5nQ2hhcnRqc1NlcnZpY2UgfSBmcm9tICcuL25nLWNoYXJ0anMuc2VydmljZSc7XG5pbXBvcnQgeyBnZXRDb2xvcnMgfSBmcm9tICcuL2NvbG9ycyc7XG4vKiB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmUgKi9cbkBEaXJlY3RpdmUoeyBzZWxlY3RvcjogJ2NhbnZhc1tuZ0NoYXJ0anNdJywgZXhwb3J0QXM6ICduZy1jaGFydC1qcycgfSlcbmV4cG9ydCBjbGFzcyBOZ0NoYXJ0anNEaXJlY3RpdmUgaW1wbGVtZW50cyBPbkRlc3Ryb3ksIE9uQ2hhbmdlcywgT25Jbml0IHtcblxuICAvLyDDpcKbwr7DqMKhwqjDp8KawoTDp8KCwrnDqcKbwobDr8K8wozDpcKuwoPDpcK6wpTDqMKvwqXDpsKYwq/DpsKVwrDDp8K7woQ8bnVtYmVyIFtdPsOkwrvChcOnwpTCqMOkwrrCjsOnwrrCv8OvwrzCjMOmwp3CocOlwpLCjMOpwpvCt8Oowr7CvsOvwrzCjMOlwpDCpsOlwojCmcOmwpXCsMOlwq3Cl1tdO1xuICBASW5wdXQoKSBkYXRhOiBudW1iZXJbXSB8IGFueVtdO1xuICAvLyDDp8KbwrjDpcK9wpPDpMK6wo5jaGFydC5qc8OlwobChSBkYXRhOiB7ZGF0YXNldHM6IFt7Li4ufV19XG4gIEBJbnB1dCgpIGRhdGFzZXRzOiBhbnlbXTtcbiAgLy8geMOowr3CtMOmwqDCh8Onwq3CvsOjwoDCgsOowr/CmcOlwq/CucOlwpvCvsOowqHCqMOmwp3CpcOowq/CtMOmwpjCr8Olwr/ChcOowqbCgcOnwprChMOvwrzCmsOnwrrCv8OvwrzCjMOmwp3CocOlwpLCjMOpwpvCt8Oowr7CvsOjwoDCgsOlwrnCtsOkwrjClMOlwo/CqsOmwpjCr8OlwpvCvsOowqHCqMOnwprChMOmwqDCh8Onwq3CvsOvwrzCiMOmwoLCrMOlwoHCnMOvwrzCicOvwrzCmnBvbGFyQXJlYcOvwrzCjHBpZcOlwpLCjGRvdWdobnV0XG4gIEBJbnB1dCgpIGxhYmVsczogYW55W10gPSBbXTtcbiAgLy8gw6fCm8K4w6XCvcKTw6TCusKOY2hhcnQuanPDp8KawoRvcHRpb25cbiAgQElucHV0KCkgb3B0aW9uczogYW55ID0ge307XG4gIC8vIMOlwobChcOowoHClMOmwo/CksOkwrvCtsOlwrHCnsOmwoDCp1xuICBASW5wdXQoKSBpbmxpbmVQbHVnaW5zOiBhbnlbXTtcbiAgLy8gY2hhcnRUeXBlIGxpbmUsIGJhciwgcmFkYXIsIHBpZSwgcG9sYXJBcmVhLCBkb3VnaG51dFxuICBASW5wdXQoKSBjaGFydFR5cGU6IHN0cmluZztcbiAgLy8gw6bClcKww6bCjcKuw6nCosKcw6jCicKyw6/CvMKMw6XCpsKCw6bCnsKcw6bCssKhw6bCnMKJw6bCjMKHw6XCrsKaw6/CvMKMw6XCsMKGw6TCvcK/w6fClMKow6nCu8KYw6jCrsKkw6XCksKMfMOmwojClsOpwprCj8OmwpzCusOpwqLCnMOowonCslxuICBASW5wdXQoKSBjb2xvcnM6IGFueVtdO1xuICAvLyDDpsKYwq/DpcKQwqbDpsKYwr7Dp8KkwrrDpcKbwr7DpMK+wotcbiAgQElucHV0KCkgbGVnZW5kOiBib29sZWFuO1xuXG4gIEBJbnB1dCgpIGFkZGluZzogeyBsYWJlbHM6IGFueVtdLCBkYXRhOiBhbnlbXVtdIH07XG4gIEBJbnB1dCgpIHJlbW92aW5nOiB7IG9yaWVudGF0aW9uOiBzdHJpbmcgfTsgIC8vIG9yaWVudGF0aW9uIGlzICdvbGRlc3QnIG9yICdsYXRlc3RcbiAgQElucHV0KCkgcmVzZXRPcHRpb246IGFueTtcblxuICAvLyDDqcK8wqDDpsKgwofDp8KCwrnDpcKHwrvDpcKbwr7DqMKhwqjDpsKJwoDDpsKcwonDp8KawoTDpcKMwrrDpcKfwp9cbiAgQE91dHB1dCgpIGNoYXJ0Q2xpY2s6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAvLyDDqcK8wqDDpsKgwofDpsKCwqzDpsK1wq7DpcKcwqjDpsKgwofDp8Ktwr7DpsKIwpbDqMKAwoXDpsK0wrvDqMK3woPDp8KawoTDp8KCwrnDpMK4worDqcKdwqLDpsKXwrZcbiAgQE91dHB1dCgpIGNoYXJ0SG92ZXI6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gIHB1YmxpYyBjdHg6IGFueTtcbiAgcHVibGljIGNoYXJ0OiBhbnk7XG4gIHByaXZhdGUgY3ZzOiBhbnk7XG4gIHByaXZhdGUgaW5pdEZsYWcgPSBmYWxzZTtcbiAgcHJpdmF0ZSBoYXNDaGFuZ2VzID0gZmFsc2U7XG5cbiAgcHJpdmF0ZSBlbGVtZW50OiBFbGVtZW50UmVmO1xuXG4gIHB1YmxpYyBjb25zdHJ1Y3RvcihlbGVtZW50OiBFbGVtZW50UmVmLFxuICAgIHByaXZhdGUgbmdDaGFydGpzU2VydmljZTogTmdDaGFydGpzU2VydmljZSxcbiAgICBwcml2YXRlIHN0b3JlU2VydmljZTogU3RvcmVTZXJ2aWNlKSB7XG4gICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDsgICAvLyDDqMKOwrfDpcKPwpbDpsKMwofDpMK7wqTDpsKJwoDDpcKcwqhjYW52YXPDpcKFwoPDp8K0wqBcbiAgfVxuXG4gIG5nT25Jbml0KCkge1xuICAgIHRoaXMuY3R4ID0gdGhpcy5lbGVtZW50Lm5hdGl2ZUVsZW1lbnQuZ2V0Q29udGV4dCgnMmQnKTsgLy8gw6jCjsK3w6XCj8KWw6XChcKDw6fCtMKgw6fCmsKEY3R4XG4gICAgdGhpcy5jdnMgPSB0aGlzLmVsZW1lbnQubmF0aXZlRWxlbWVudDsgIC8vIMOowo7Ct8Olwo/ClsOowr/CmcOkwrjCqsOlwoXCg8OnwrTCoFxuICAgIHRoaXMuaW5pdEZsYWcgPSB0cnVlOyAvLyDDpsKYwq/DpcKQwqbDpcKIwp3DpcKnwovDpcKMwpbDpMK6wobDp8KawoTDpsKgwofDpcK/wpdcblxuICAgIGlmICh0aGlzLmRhdGEgfHwgdGhpcy5kYXRhc2V0cykgeyAvLyDDpcKIwqTDpsKWwq1kYXRhw6XCksKMZGF0YXNldHPDpsKcwonDpMK4woDDpMK4wqrDpsKcwonDpsKVwrDDpsKNwq7DpcKwwrHDpcKIwrfDpsKWwrBcbiAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgIH1cbiAgfVxuXG4gIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpIHtcbiAgICAvLyBUT0RPOiDDpsKPwpLDpMK7wrbDpcKPwpjDpcKMwpbDpcKIwrfDpsKWwrDDr8K8wozDpcK8woDDpsKUwr7DpcKIwrfDpsKWwrDDpsKMwonDqcKSwq5cbiAgICBpZiAodGhpcy5pbml0RmxhZykge1xuICAgICAgLy8gQ2hlY2sgaWYgdGhlIGNoYW5nZXMgYXJlIGluIHRoZSBkYXRhIG9yIGRhdGFzZXRzXG4gICAgICBpZiAoY2hhbmdlcy5oYXNPd25Qcm9wZXJ0eSgnZGF0YScpIHx8IGNoYW5nZXMuaGFzT3duUHJvcGVydHkoJ2RhdGFzZXRzJykpIHtcbiAgICAgICAgaWYgKGNoYW5nZXMuZGF0YSkge1xuICAgICAgICAgIHRoaXMudXBkYXRlQ2hhcnREYXRhKGNoYW5nZXMuZGF0YS5jdXJyZW50VmFsdWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMudXBkYXRlQ2hhcnREYXRhKGNoYW5nZXMuZGF0YXNldHMuY3VycmVudFZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmhhc0NoYW5nZXMgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAoY2hhbmdlcy5oYXNPd25Qcm9wZXJ0eSgnbGFiZWxzJykpIHtcbiAgICAgICAgdGhpcy5jaGFydC5kYXRhLmxhYmVscyA9IGNoYW5nZXMubGFiZWxzLmN1cnJlbnRWYWx1ZTtcbiAgICAgICAgdGhpcy5oYXNDaGFuZ2VzID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGNoYW5nZXMuaGFzT3duUHJvcGVydHkoJ2xlZ2VuZCcpKSB7XG4gICAgICAgIGlmIChjaGFuZ2VzLmxlZ2VuZC5jdXJyZW50VmFsdWUgIT09IGNoYW5nZXMubGVnZW5kLnByZXZpb3VzVmFsdWUpIHtcbiAgICAgICAgICB0aGlzLmNoYXJ0Lm9wdGlvbnMubGVnZW5kLmRpc3BsYXkgPSBjaGFuZ2VzLmxlZ2VuZC5jdXJyZW50VmFsdWU7XG4gICAgICAgICAgdGhpcy5oYXNDaGFuZ2VzID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoY2hhbmdlcy5oYXNPd25Qcm9wZXJ0eSgnYWRkaW5nJykpIHtcbiAgICAgICAgdGhpcy5hZGREYXRhKGNoYW5nZXMuYWRkaW5nLmN1cnJlbnRWYWx1ZS5sYWJlbHMsIGNoYW5nZXMuYWRkaW5nLmN1cnJlbnRWYWx1ZS5kYXRhKTtcbiAgICAgICAgdGhpcy5oYXNDaGFuZ2VzID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGNoYW5nZXMuaGFzT3duUHJvcGVydHkoJ3JlbW92aW5nJykpIHtcbiAgICAgICAgaWYgKGNoYW5nZXMucmVtb3ZpbmcuY3VycmVudFZhbHVlLm9yaWVudGF0aW9uID09PSAnb2xkZXN0JyB8fCBjaGFuZ2VzLnJlbW92aW5nLmN1cnJlbnRWYWx1ZS5vcmllbnRhdGlvbiA9PT0gJ2xhdGVzdCcpIHtcbiAgICAgICAgICB0aGlzLnJlbW92ZURhdGEoY2hhbmdlcy5yZW1vdmluZy5jdXJyZW50VmFsdWUub3JpZW50YXRpb24pO1xuICAgICAgICAgIHRoaXMuaGFzQ2hhbmdlcyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGNoYW5nZXMuaGFzT3duUHJvcGVydHkoJ3Jlc2V0T3B0aW9uJykpIHtcbiAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLmNoYXJ0Lm9wdGlvbnMsIGNoYW5nZXMucmVzZXRPcHRpb24uY3VycmVudFZhbHVlKTtcbiAgICAgICAgdGhpcy5oYXNDaGFuZ2VzID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIC8vIGVsc2Uge1xuICAgICAgLy8gICAvLyBvdGhlcndpc2UgcmVidWlsZCB0aGUgY2hhcnRcbiAgICAgIC8vICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAvLyB9XG4gICAgICBpZiAodGhpcy5oYXNDaGFuZ2VzKSB7XG4gICAgICAgIHRoaXMuY2hhcnQudXBkYXRlKCk7XG4gICAgICAgIHRoaXMuaGFzQ2hhbmdlcyA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIG5nT25EZXN0cm95KCkge1xuICAgIGlmICh0aGlzLmNoYXJ0KSB7XG4gICAgICB0aGlzLmNoYXJ0LmRlc3Ryb3koKTtcbiAgICAgIHRoaXMuY2hhcnQgPSB2b2lkIDA7XG5cbiAgICAgIGlmICh0aGlzLmVsZW1lbnQubmF0aXZlRWxlbWVudC5oYXNBdHRyaWJ1dGUoJ2lkJykpIHtcbiAgICAgICAgdGhpcy5zdG9yZVNlcnZpY2UucmVtb3ZlQ2hhcnQodGhpcy5lbGVtZW50Lm5hdGl2ZUVsZW1lbnQuaWQpOyAgLy8gZGVsZXRlIGNoYXJ0IGluc3RhbmNlLlxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcmVmcmVzaCgpOiBhbnkge1xuICAgIHRoaXMubmdPbkRlc3Ryb3koKTtcbiAgICB0aGlzLmNoYXJ0ID0gdGhpcy5nZXRDaGFydEJ1aWxkZXIodGhpcy5jdHgvKiwgZGF0YSwgdGhpcy5vcHRpb25zKi8pO1xuICAgIGlmICh0aGlzLmVsZW1lbnQubmF0aXZlRWxlbWVudC5oYXNBdHRyaWJ1dGUoJ2lkJykpIHtcbiAgICAgIHRoaXMuc3RvcmVTZXJ2aWNlLmFkZENoYXJ0KHRoaXMuZWxlbWVudC5uYXRpdmVFbGVtZW50LmlkLCB0aGlzLmNoYXJ0KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFkZERhdGEobGFiZWxzOiBhbnlbXSwgZGF0YTogYW55W11bXSkge1xuICAgIGlmIChsYWJlbHMubGVuZ3RoID09PSAwIHx8IGRhdGEubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIHVwZGF0ZSBsYWJlbHNcbiAgICBsYWJlbHMuZm9yRWFjaCgobGFiZWwpID0+IHsgdGhpcy5jaGFydC5kYXRhLmxhYmVscy5wdXNoKGxhYmVsKTsgfSk7XG5cbiAgICB0aGlzLmNoYXJ0LmRhdGEuZGF0YXNldHMuZm9yRWFjaCgoZGF0YXNldCwgaW5kZXgpID0+IHtcbiAgICAgIGlmIChkYXRhW2luZGV4XSkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGFbaW5kZXhdLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgZGF0YXNldC5kYXRhLnB1c2goZGF0YVtpbmRleF1baV0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZygnVGhlIGFkZGVkIGRhdGEgZG9lcyBub3QgbWF0Y2ggdGhlIG9yaWdpbmFsIGRhdGEnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIC8vIGRpcmVjdGlvbiBpcyAnaWxkZXN0JyBvciAnbGF0ZXN0J1xuICBwcml2YXRlIHJlbW92ZURhdGEoZGlyZWN0aW9uOiBzdHJpbmcpIHtcbiAgICBpZiAoZGlyZWN0aW9uID09PSAnbGF0ZXN0Jykge1xuICAgICAgdGhpcy5jaGFydC5kYXRhLmxhYmVscy5wb3AoKTtcbiAgICAgIHRoaXMuY2hhcnQuZGF0YS5kYXRhc2V0cy5mb3JFYWNoKChkYXRhc2V0KSA9PiB7XG4gICAgICAgIGRhdGFzZXQuZGF0YS5wb3AoKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoZGlyZWN0aW9uID09PSAnb2xkZXN0Jykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfVxuICBwcml2YXRlIHVwZGF0ZUNoYXJ0RGF0YShuZXdEYXRhVmFsdWVzOiBudW1iZXJbXSB8IGFueVtdKTogdm9pZCB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkobmV3RGF0YVZhbHVlc1swXS5kYXRhKSkge1xuICAgICAgdGhpcy5jaGFydC5kYXRhLmRhdGFzZXRzLmZvckVhY2goKGRhdGFzZXQ6IGFueSwgaTogbnVtYmVyKSA9PiB7XG4gICAgICAgIGRhdGFzZXQuZGF0YSA9IG5ld0RhdGFWYWx1ZXNbaV0uZGF0YTtcblxuICAgICAgICBpZiAobmV3RGF0YVZhbHVlc1tpXS5sYWJlbCkge1xuICAgICAgICAgIGRhdGFzZXQubGFiZWwgPSBuZXdEYXRhVmFsdWVzW2ldLmxhYmVsO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jaGFydC5kYXRhLmRhdGFzZXRzWzBdLmRhdGEgPSBuZXdEYXRhVmFsdWVzO1xuICAgIH1cbiAgfVxuXG4gIGdldENoYXJ0QnVpbGRlcihjdHg6IGFueS8qLCBkYXRhOkFycmF5PGFueT4sIG9wdGlvbnM6YW55Ki8pOiBhbnkge1xuICAgIGNvbnN0IGRhdGFzZXRzOiBhbnkgPSB0aGlzLmdldERhdGFzZXRzKCk7XG5cbiAgICBjb25zdCBvcHRpb25zOiBhbnkgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLm9wdGlvbnMpOyAvLyDDpsK3wrHDpcKkwo3DpcKIwrZvcHRpb25zXG4gICAgaWYgKHRoaXMubGVnZW5kID09PSBmYWxzZSkgeyAgLy8gw6jCrsK+w6fCvcKub3B0aW9uc8OnwprChGxlZ2VuZCBUT0RPOiDDpcKQwo7Dp8K7wq3DqMK/wpnDpMK4wqrDpcKxwp7DpsKAwqfDpcKOwrvDqcKZwqTDr8K8wozDp8KbwrTDpsKOwqXDpcKcwqhvcHRpb25zw6XChsKFw6jCrsK+w6fCvcKuXG4gICAgICBvcHRpb25zLmxlZ2VuZCA9IHsgZGlzcGxheTogZmFsc2UgfTtcbiAgICB9XG4gICAgLy8gaG9jayBmb3Igb25Ib3ZlciBhbmQgb25DbGljayBldmVudHNcbiAgICBvcHRpb25zLmhvdmVyID0gb3B0aW9ucy5ob3ZlciB8fCB7fTtcbiAgICBpZiAoIW9wdGlvbnMuaG92ZXIub25Ib3Zlcikge1xuICAgICAgb3B0aW9ucy5ob3Zlci5vbkhvdmVyID0gKGFjdGl2ZTogYW55W10pID0+IHtcbiAgICAgICAgaWYgKGFjdGl2ZSAmJiAhYWN0aXZlLmxlbmd0aCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNoYXJ0SG92ZXIuZW1pdCh7IGFjdGl2ZSB9KTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgaWYgKCFvcHRpb25zLm9uQ2xpY2spIHtcbiAgICAgIG9wdGlvbnMub25DbGljayA9IChldmVudDogYW55LCBhY3RpdmU6IGFueVtdKSA9PiB7XG4gICAgICAgIHRoaXMuY2hhcnRDbGljay5lbWl0KHsgZXZlbnQsIGFjdGl2ZSB9KTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgY29uc3Qgb3B0cyA9IHtcbiAgICAgIHR5cGU6IHRoaXMuY2hhcnRUeXBlLFxuICAgICAgZGF0YToge1xuICAgICAgICBsYWJlbHM6IHRoaXMubGFiZWxzLFxuICAgICAgICBkYXRhc2V0czogZGF0YXNldHMgICAvLyBUT0RPOiDDpcKQwo7Dp8K7wq3DpsKbwrTDpsKUwrnDqMK/wpnDpMK4wqrDpcKxwp7DpsKAwqfDpcKQwo3DpcKtwpfDr8K8wozDpcKQwqbDpcKIwpnDqMKtwqbDpcKRwopcbiAgICAgIH0sXG4gICAgICBvcHRpb25zOiBvcHRpb25zLCAgIC8vIFRPRE86IMOlwpDCjsOnwrvCrcOmwpvCtMOmwpTCucOowr/CmcOkwrjCqsOlwrHCnsOmwoDCp8OlwpDCjcOlwq3Cl8OvwrzCjMOlwpDCpsOlwojCmcOowq3CpsOlwpHCilxuICAgICAgcGx1Z2luczogdGhpcy5pbmxpbmVQbHVnaW5zXG4gICAgfTtcblxuICAgIHJldHVybiBuZXcgQ2hhcnQoY3R4LCBvcHRzKTtcbiAgfVxuXG4gIC8vIMOowo7Ct8Olwo/CliBjaGFydC5qc8OnwprChGRhdGFzZXRzw6bClcKww6bCjcKuXG4gIHByaXZhdGUgZ2V0RGF0YXNldHMoKTogYW55IHtcbiAgICBsZXQgZGF0YXNldHM6IGFueSA9IHZvaWQgMDtcbiAgICAvLyBpbiBjYXNlIGlmIGRhdGFzZXRzIGlzIG5vdCBwcm92aWRlZCwgYnV0IGRhdGEgaXMgcHJlc2VudFxuICAgIGlmICghdGhpcy5kYXRhc2V0cyB8fCAhdGhpcy5kYXRhc2V0cy5sZW5ndGggJiYgKHRoaXMuZGF0YSAmJiB0aGlzLmRhdGEubGVuZ3RoKSkge1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkodGhpcy5kYXRhWzBdKSkge1xuICAgICAgICBkYXRhc2V0cyA9ICh0aGlzLmRhdGEgYXMgbnVtYmVyW11bXSkubWFwKChkYXRhOiBudW1iZXJbXSwgaW5kZXg6IG51bWJlcikgPT4ge1xuICAgICAgICAgIHJldHVybiB7IGRhdGEsIGxhYmVsOiB0aGlzLmxhYmVsc1tpbmRleF0gfHwgYExhYmVsICR7aW5kZXh9YCB9O1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRhdGFzZXRzID0gW3sgZGF0YTogdGhpcy5kYXRhLCBsYWJlbDogYExhYmVsIDBgIH1dO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLmRhdGFzZXRzICYmIHRoaXMuZGF0YXNldHMubGVuZ3RoIHx8XG4gICAgICAoZGF0YXNldHMgJiYgZGF0YXNldHMubGVuZ3RoKSkge1xuICAgICAgZGF0YXNldHMgPSAodGhpcy5kYXRhc2V0cyB8fCBkYXRhc2V0cylcbiAgICAgICAgLm1hcCgoZWxtOiBudW1iZXIsIGluZGV4OiBudW1iZXIpID0+IHtcbiAgICAgICAgICBjb25zdCBuZXdFbG06IGFueSA9IE9iamVjdC5hc3NpZ24oe30sIGVsbSk7XG4gICAgICAgICAgaWYgKHRoaXMuY29sb3JzICYmIHRoaXMuY29sb3JzLmxlbmd0aCkge1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihuZXdFbG0sIHRoaXMuY29sb3JzW2luZGV4XSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24obmV3RWxtLCBnZXRDb2xvcnModGhpcy5jaGFydFR5cGUsIGluZGV4LCBuZXdFbG0uZGF0YS5sZW5ndGgpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIG5ld0VsbTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKCFkYXRhc2V0cykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBuZy1jaGFydHMgY29uZmlndXJhdGlvbiBlcnJvcixcbiAgICAgIGRhdGEgb3IgZGF0YXNldHMgZmllbGQgYXJlIHJlcXVpcmVkIHRvIHJlbmRlciBjaGFyICR7dGhpcy5jaGFydFR5cGV9YCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRhdGFzZXRzO1xuICB9XG59XG4iLCJpbXBvcnQgeyBOZ01vZHVsZSwgTW9kdWxlV2l0aFByb3ZpZGVycyB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgTmdDaGFydGpzRGlyZWN0aXZlIH0gZnJvbSAnLi9uZy1jaGFydGpzLmRpcmVjdGl2ZSc7XG5pbXBvcnQgeyBOZ0NoYXJ0anNEZWZhdWx0UGx1Z2luVG9rZW4sIE5nQ2hhcnRqc0N1c3RvbVBsdWdpblRva2VuIH0gZnJvbSAnLi9wbHVnaW4tdG9rZW4nO1xuaW1wb3J0IHsgUGx1Z2luQ29uZmlnIH0gZnJvbSAnLi9wbHVnaW5zQ29uZmlnJztcbmltcG9ydCB7IE5nQ2hhcnRqc1NlcnZpY2UgfSBmcm9tICcuL25nLWNoYXJ0anMuc2VydmljZSc7XG5cblxuZXhwb3J0IGZ1bmN0aW9uIG5nQ2hhcnRqc0N1c3RvbVBsdWdpbnNGYWN0b3J5KHBsdWdpbnM6IGFueVtdKTogUGx1Z2luQ29uZmlnIHtcbiAgcmV0dXJuIG5ldyBQbHVnaW5Db25maWcocGx1Z2lucyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBuZ0NoYXJ0anNEZWZhdWx0UGx1Z2luc0ZhY3RvcnkoKTogUGx1Z2luQ29uZmlnIHtcbiAgcmV0dXJuIG5ldyBQbHVnaW5Db25maWcoW10pO1xufVxuXG5cbkBOZ01vZHVsZSh7XG4gIGltcG9ydHM6IFtcbiAgXSxcbiAgZGVjbGFyYXRpb25zOiBbTmdDaGFydGpzRGlyZWN0aXZlXSxcbiAgZXhwb3J0czogW05nQ2hhcnRqc0RpcmVjdGl2ZV0sXG4gIHByb3ZpZGVyczogW1xuICAgIHtcbiAgICAgIHByb3ZpZGU6IE5nQ2hhcnRqc0N1c3RvbVBsdWdpblRva2VuLFxuICAgICAgdXNlRmFjdG9yeTogbmdDaGFydGpzRGVmYXVsdFBsdWdpbnNGYWN0b3J5XG4gICAgfVxuICBdXG59KVxuZXhwb3J0IGNsYXNzIE5nQ2hhcnRqc01vZHVsZSB7XG4gIC8qKlxuICAgKiBSZWdpc3RlciBhIHBsdWdpbi5cbiAgICogQHBhcmFtIHBsdWdpblxuICAgKi9cbiAgcHVibGljIHN0YXRpYyByZWdpc3RlclBsdWdpbihwbHVnaW5zOiBhbnlbXSA9IFtdKTogTW9kdWxlV2l0aFByb3ZpZGVycyB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5nTW9kdWxlOiBOZ0NoYXJ0anNNb2R1bGUsXG4gICAgICBwcm92aWRlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIHByb3ZpZGU6IE5nQ2hhcnRqc0RlZmF1bHRQbHVnaW5Ub2tlbixcbiAgICAgICAgICB1c2VWYWx1ZTogcGx1Z2luc1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgZGVwczogW05nQ2hhcnRqc0RlZmF1bHRQbHVnaW5Ub2tlbl0sXG4gICAgICAgICAgcHJvdmlkZTogTmdDaGFydGpzQ3VzdG9tUGx1Z2luVG9rZW4sXG4gICAgICAgICAgdXNlRmFjdG9yeTogbmdDaGFydGpzQ3VzdG9tUGx1Z2luc0ZhY3RvcnlcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH07XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJJbmplY3RhYmxlIiwiSW5qZWN0aW9uVG9rZW4iLCJDaGFydCIsIkluamVjdCIsImZvcndhcmRSZWYiLCJFdmVudEVtaXR0ZXIiLCJEaXJlY3RpdmUiLCJFbGVtZW50UmVmIiwiSW5wdXQiLCJPdXRwdXQiLCJOZ01vZHVsZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBOzttQ0FNbUMsRUFBRTs0QkFDTixFQUFFOzs7Ozs7O1FB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