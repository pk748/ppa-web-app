!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("chart.js")):"function"==typeof define&&define.amd?define("ng-chartjs",["exports","@angular/core","chart.js"],e):e(t["ng-chartjs"]={},t.ng.core,null)}(this,function(t,n,o){"use strict";var e=function(){function t(){this._chartInstances=[],this._chartId=[]}return t.prototype.addChart=function(t,e){for(var r=0;r<this._chartId.length;r++)if(t===this._chartId[r])return;this._chartId.push(t),this._chartInstances.push(e)},t.prototype.removeChart=function(t){for(var e=0;e<this._chartId.length;e++)t===this._chartId[e]&&(this._chartId.splice(e,1),this._chartInstances.splice(e,1))},t.prototype.getChart=function(t){for(var e=0;e<this._chartId.length;e++)if(t===this._chartId[e])return this._chartInstances[e];return null},t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ngInjectableDef=n.defineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t}(),r=new n.InjectionToken("[ngx-chart-js] Global Default Plugin"),a=new n.InjectionToken("[ngx-chart-js] Global Custom Plugin"),i=function(){function t(t){void 0===t&&(t=[]),this._plugins=t}return Object.defineProperty(t.prototype,"plugins",{get:function(){return this._plugins},enumerable:!0,configurable:!0}),t}(),s=function(){function t(t,e){if(this.pluginConfig=t,this.storeService=e,this.plugins=t.plugins,0!==this.plugins.length||this.plugins)for(var r=0;r<this.plugins.length;r++)this.plugins[r]&&o.Chart.plugins.register(this.plugins[r])}return t.prototype.getChart=function(t){return this.storeService.getChart(t)},t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:i,decorators:[{type:n.Inject,args:[n.forwardRef(function(){return a})]}]},{type:e}]},t.ngInjectableDef=n.defineInjectable({factory:function(){return new t(n.inject(a),n.inject(e))},token:t,providedIn:"root"}),t}(),h=[[63,81,181],[233,30,99],[156,39,176],[0,188,212],[3,169,244],[0,150,136],[255,152,0],[96,125,139],[255,193,7],[37,155,36],[205,220,57],[86,119,252]];function u(t,e){return"rgba("+t.concat(e).join(",")+")"}function c(t,e){return Math.floor(Math.random()*(e-t+1))+t}function l(){return[c(0,255),c(0,255),c(0,255)]}function d(t){return h[t]||l()}function p(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=h[r]||l();return e}function g(t,e,r){return"pie"===t||"doughnut"===t?function n(t){return{backgroundColor:t.map(function(t){return u(t,.6)}),borderColor:t.map(function(){return"#fff"}),pointBackgroundColor:t.map(function(t){return u(t,1)}),pointBorderColor:t.map(function(){return"#fff"}),pointHoverBackgroundColor:t.map(function(t){return u(t,1)}),pointHoverBorderColor:t.map(function(t){return u(t,1)})}}(p(r)):"polarArea"===t?function a(t){return{backgroundColor:t.map(function(t){return u(t,.6)}),borderColor:t.map(function(t){return u(t,1)}),hoverBackgroundColor:t.map(function(t){return u(t,.8)}),hoverBorderColor:t.map(function(t){return u(t,1)})}}(p(r)):"line"===t||"radar"===t?function o(t){return{backgroundColor:u(t,.4),borderColor:u(t,1),pointBackgroundColor:u(t,1),pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:u(t,.8)}}(d(e)):"bar"===t||"horizontalBar"===t?function i(t){return{backgroundColor:u(t,.6),borderColor:u(t,1),hoverBackgroundColor:u(t,.8),hoverBorderColor:u(t,1)}}(d(e)):d(e)}var f=function(){function t(t,e,r){this.ngChartjsService=e,this.storeService=r,this.labels=[],this.options={},this.chartClick=new n.EventEmitter,this.chartHover=new n.EventEmitter,this.initFlag=!1,this.hasChanges=!1,this.element=t}return t.prototype.ngOnInit=function(){this.ctx=this.element.nativeElement.getContext("2d"),this.cvs=this.element.nativeElement,this.initFlag=!0,(this.data||this.datasets)&&this.refresh()},t.prototype.ngOnChanges=function(t){this.initFlag&&((t.hasOwnProperty("data")||t.hasOwnProperty("datasets"))&&(t.data?this.updateChartData(t.data.currentValue):this.updateChartData(t.datasets.currentValue),this.hasChanges=!0),t.hasOwnProperty("labels")&&(this.chart.data.labels=t.labels.currentValue,this.hasChanges=!0),t.hasOwnProperty("legend")&&t.legend.currentValue!==t.legend.previousValue&&(this.chart.options.legend.display=t.legend.currentValue,this.hasChanges=!0),t.hasOwnProperty("adding")&&(this.addData(t.adding.currentValue.labels,t.adding.currentValue.data),this.hasChanges=!0),t.hasOwnProperty("removing")&&("oldest"!==t.removing.currentValue.orientation&&"latest"!==t.removing.currentValue.orientation||(this.removeData(t.removing.currentValue.orientation),this.hasChanges=!0)),t.hasOwnProperty("resetOption")&&(Object.assign(this.chart.options,t.resetOption.currentValue),this.hasChanges=!0),this.hasChanges&&(this.chart.update(),this.hasChanges=!1))},t.prototype.ngOnDestroy=function(){this.chart&&(this.chart.destroy(),this.chart=void 0,this.element.nativeElement.hasAttribute("id")&&this.storeService.removeChart(this.element.nativeElement.id))},t.prototype.refresh=function(){this.ngOnDestroy(),this.chart=this.getChartBuilder(this.ctx),this.element.nativeElement.hasAttribute("id")&&this.storeService.addChart(this.element.nativeElement.id,this.chart)},t.prototype.addData=function(t,n){var e=this;0!==t.length&&0!==n.length&&(t.forEach(function(t){e.chart.data.labels.push(t)}),this.chart.data.datasets.forEach(function(t,e){if(n[e])for(var r=0;r<n[e].length;r++)t.data.push(n[e][r]);else console.log("The added data does not match the original data")}))},t.prototype.removeData=function(t){if("latest"===t)return this.chart.data.labels.pop(),void this.chart.data.datasets.forEach(function(t){t.data.pop()})},t.prototype.updateChartData=function(r){Array.isArray(r[0].data)?this.chart.data.datasets.forEach(function(t,e){t.data=r[e].data,r[e].label&&(t.label=r[e].label)}):this.chart.data.datasets[0].data=r},t.prototype.getChartBuilder=function(t){var r=this,e=this.getDatasets(),n=Object.assign({},this.options);!1===this.legend&&(n.legend={display:!1}),n.hover=n.hover||{},n.hover.onHover||(n.hover.onHover=function(t){t&&!t.length||r.chartHover.emit({active:t})}),n.onClick||(n.onClick=function(t,e){r.chartClick.emit({event:t,active:e})});var a={type:this.chartType,data:{labels:this.labels,datasets:e},options:n,plugins:this.inlinePlugins};return new o.Chart(t,a)},t.prototype.getDatasets=function(){var n=this,t=void 0;if((!this.datasets||!this.datasets.length&&this.data&&this.data.length)&&(t=Array.isArray(this.data[0])?this.data.map(function(t,e){return{data:t,label:n.labels[e]||"Label "+e}}):[{data:this.data,label:"Label 0"}]),(this.datasets&&this.datasets.length||t&&t.length)&&(t=(this.datasets||t).map(function(t,e){var r=Object.assign({},t);return n.colors&&n.colors.length?Object.assign(r,n.colors[e]):Object.assign(r,g(n.chartType,e,r.data.length)),r})),!t)throw new Error("ng-charts configuration error,\n      data or datasets field are required to render char "+this.chartType);return t},t.decorators=[{type:n.Directive,args:[{selector:"canvas[ngChartjs]",exportAs:"ng-chart-js"}]}],t.ctorParameters=function(){return[{type:n.ElementRef},{type:s},{type:e}]},t.propDecorators={data:[{type:n.Input}],datasets:[{type:n.Input}],labels:[{type:n.Input}],options:[{type:n.Input}],inlinePlugins:[{type:n.Input}],chartType:[{type:n.Input}],colors:[{type:n.Input}],legend:[{type:n.Input}],adding:[{type:n.Input}],removing:[{type:n.Input}],resetOption:[{type:n.Input}],chartClick:[{type:n.Output}],chartHover:[{type:n.Output}]},t}();function v(t){return new i(t)}function y(){return new i([])}var C=function(){function e(){}return e.registerPlugin=function(t){return void 0===t&&(t=[]),{ngModule:e,providers:[{provide:r,useValue:t},{deps:[r],provide:a,useFactory:v}]}},e.decorators=[{type:n.NgModule,args:[{imports:[],declarations:[f],exports:[f],providers:[{provide:a,useFactory:y}]}]}],e}();t.NgChartjsDirective=f,t.ngChartjsCustomPluginsFactory=v,t.ngChartjsDefaultPluginsFactory=y,t.NgChartjsModule=C,t.NgChartjsService=s,t.ɵb=a,t.ɵa=r,t.ɵc=i,t.ɵd=e,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ng-chartjs.umd.min.js.map