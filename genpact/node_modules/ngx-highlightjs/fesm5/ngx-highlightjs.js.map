{"version":3,"file":"ngx-highlightjs.js.map","sources":["ng://ngx-highlightjs/lib/highlight.token.ts","ng://ngx-highlightjs/lib/highlight.service.ts","ng://ngx-highlightjs/lib/highlight.directive.ts","ng://ngx-highlightjs/lib/highlight.module.ts"],"sourcesContent":["import { InjectionToken } from '@angular/core';\r\nimport { HighlightOptions } from './highlight.model';\r\n\r\nexport const OPTIONS = new InjectionToken<HighlightOptions>('OPTIONS');\r\n","import { Injectable, Inject, Optional } from '@angular/core';\r\nimport { DOCUMENT } from '@angular/common';\r\nimport { BehaviorSubject, Observable, from, of } from 'rxjs';\r\nimport { take, filter, tap, switchMap } from 'rxjs/operators';\r\nimport { HighlightConfig, HighlightOptions, HighlightResult } from './highlight.model';\r\nimport { OPTIONS } from './highlight.token';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class HighlightJS {\r\n\r\n  hljs: any;\r\n\r\n  options: HighlightOptions = {\r\n    theme: 'github',\r\n    path: 'assets/lib/hljs',\r\n    auto: true\r\n  };\r\n\r\n  private _isReady$ = new BehaviorSubject(false);\r\n\r\n  // Stream that emits when highlightjs is loaded\r\n  get isReady(): Observable<boolean> {\r\n    return this._isReady$.pipe(\r\n      filter(isReady => isReady),\r\n      take(1)\r\n    );\r\n  }\r\n\r\n  constructor(@Optional() @Inject(OPTIONS) options: HighlightOptions,\r\n              @Inject(DOCUMENT) private _document: any) {\r\n    this.options = { ...this.options, ...options };\r\n    this._hljsLoader().subscribe();\r\n  }\r\n\r\n  highlight(name: string, value: string, ignore_illegals: boolean, continuation?: any): HighlightResult {\r\n    if (this.hljs) {\r\n      return this.hljs.highlight(name, value, ignore_illegals, continuation);\r\n    }\r\n  }\r\n\r\n  highlightAuto(value: string, languageSubset: string[]): HighlightResult {\r\n    if (this.hljs) {\r\n      return this.hljs.highlightAuto(value, languageSubset);\r\n    }\r\n  }\r\n\r\n  fixMarkup(value: string): string {\r\n    if (this.hljs) {\r\n      return this.hljs.fixMarkup(value);\r\n    }\r\n  }\r\n\r\n  highlightBlock(block: HTMLElement) {\r\n    if (this.hljs) {\r\n      this.hljs.highlightBlock(block);\r\n    }\r\n  }\r\n\r\n  configure(config: HighlightConfig) {\r\n    if (this.hljs) {\r\n      this.hljs.configure(config);\r\n    }\r\n  }\r\n\r\n  initHighlighting() {\r\n    if (this.hljs) {\r\n      this.hljs.initHighlighting();\r\n    }\r\n  }\r\n\r\n  initHighlightingOnLoad() {\r\n    if (this.hljs) {\r\n      this.hljs.initHighlightingOnLoad();\r\n    }\r\n  }\r\n\r\n  registerLanguage(name: string, language: Function) {\r\n    if (this.hljs) {\r\n      this.hljs.registerLanguage(name, language);\r\n    }\r\n  }\r\n\r\n  listLanguages(): string[] {\r\n    if (this.hljs) {\r\n      return this.hljs.listLanguages();\r\n    }\r\n  }\r\n\r\n  getLanguage(name: string): any {\r\n    if (this.hljs) {\r\n      return this.hljs.getLanguage(name);\r\n    }\r\n  }\r\n\r\n  private _hljsLoader(): Observable<any> {\r\n    if (this._document.defaultView.hljs) {\r\n      return this._initHLJS();\r\n    } else {\r\n      this._themeLoader().subscribe();\r\n      return this._loadScript();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Load hljs script\r\n   */\r\n  private _loadScript(): Observable<any> {\r\n    const promise = new Promise((resolve) => {\r\n      const script = this._document.createElement('script');\r\n      script.async = true;\r\n      script.type = 'text/javascript';\r\n      script.onload = resolve;\r\n      script.src = `${this.options.path}/highlight.pack.js`;\r\n      this._document.head.appendChild(script);\r\n    });\r\n    return from(promise).pipe(\r\n      switchMap(() => this._initHLJS())\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Load hljs theme\r\n   */\r\n  private _themeLoader(): Observable<any> {\r\n    const promise = new Promise((resolve) => {\r\n      const style = this._document.createElement('link');\r\n      style.rel = 'stylesheet';\r\n      style.type = 'text/css';\r\n      style.onload = resolve;\r\n      style.href = `${this.options.path}/styles/${this.options.theme}.css`;\r\n      this._document.head.appendChild(style);\r\n    });\r\n    return from(promise);\r\n  }\r\n\r\n  /**\r\n   * Initialize hljs on load\r\n   */\r\n  private _initHLJS() {\r\n    return of({}).pipe(\r\n      tap(() => {\r\n        this.hljs = this._document.defaultView.hljs;\r\n        this.hljs.configure(this.options.config);\r\n        this._isReady$.next(true);\r\n      })\r\n    );\r\n  }\r\n}\r\n","import { Directive, ElementRef, Renderer2, OnDestroy, Input, Output, EventEmitter, OnInit } from '@angular/core';\r\nimport { from } from 'rxjs';\r\nimport { map, take, filter } from 'rxjs/operators';\r\nimport { HighlightJS } from './highlight.service';\r\nimport { HighlightResult } from './highlight.model';\r\n\r\n/** There are 2 ways to higlight a code\r\n *  1 - using the [code] input (default) <code highlight [code]=\"yourCode\"></code>\r\n *  2 - using element text content <code> {{yourCode}} </code>\r\n */\r\n\r\n@Directive({\r\n  selector: '[highlight]'\r\n})\r\nexport class HighlightDirective implements OnInit, OnDestroy {\r\n\r\n  el: HTMLElement;\r\n  domObs: MutationObserver;\r\n  code: string;\r\n  @Input() highlight: string;\r\n  @Input() language: string[];\r\n  @Input('code')\r\n  set setCode(code: string) {\r\n    this.code = code;\r\n    this.hljs.isReady.subscribe(() => this.highlightElement(this.el, code));\r\n  }\r\n\r\n  @Output() highlighted = new EventEmitter<HighlightResult>();\r\n\r\n  constructor(el: ElementRef, private renderer: Renderer2, private hljs: HighlightJS) {\r\n    this.el = el.nativeElement;\r\n  }\r\n\r\n  ngOnInit() {\r\n\r\n    /** Acitvate MutationObserver if `auto` option is true and `[code]` input is not used\r\n     * This will highlight using the text content */\r\n    if (!this.code && this.hljs.options.auto) {\r\n\r\n      this.hljs.isReady.subscribe(() => {\r\n        this.highlightTextContent();\r\n\r\n        /** Highlight when text content changes */\r\n        this.domObs = new MutationObserver(() => this.highlightTextContent());\r\n        this.domObs.observe(this.el, { childList: true, subtree: true });\r\n      });\r\n    }\r\n  }\r\n\r\n  /** Highlight using element text content */\r\n  highlightTextContent() {\r\n    if (!this.highlight) {\r\n      if (this.el.tagName.toLowerCase() === 'code') {\r\n        this.highlightElement(this.el, this.el.innerText.trim());\r\n      } else {\r\n        console.warn(`[HighlightDirective]: Use 'highlight' on <code> element only`);\r\n      }\r\n    } else if (this.highlight === 'all') {\r\n      this.highlightChildren(this.el, 'pre code');\r\n    } else {\r\n      this.highlightChildren(this.el, this.highlight);\r\n    }\r\n  }\r\n\r\n  /** Highlight a code block */\r\n  highlightElement(el: HTMLElement, code: string) {\r\n\r\n    const res: HighlightResult = this.hljs.highlightAuto(code, this.language);\r\n    if (res.value !== el.innerHTML) {\r\n      this.renderer.addClass(el, 'hljs');\r\n      this.renderer.setProperty(el, 'innerHTML', res.value);\r\n      this.highlighted.emit(res);\r\n    }\r\n  }\r\n\r\n  /** Highlight multiple code blocks */\r\n  highlightChildren(el: HTMLElement, selector: string) {\r\n\r\n    const codeElements = el.querySelectorAll(selector);\r\n\r\n    /** highlight children with the same selector */\r\n    from(codeElements).pipe(\r\n      filter((code: HTMLElement) => code.childNodes.length === 1 && code.childNodes[0].nodeName === '#text'),\r\n      map((codeElement: HTMLElement) => this.highlightElement(codeElement, codeElement.innerText.trim())),\r\n      take(1)\r\n    ).subscribe();\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    /** Disconnect MutationObserver */\r\n    if (!this.code && this.hljs.options.auto) {\r\n      this.domObs.disconnect();\r\n    }\r\n  }\r\n}\r\n","import { ModuleWithProviders, NgModule } from '@angular/core';\r\nimport { HighlightDirective } from './highlight.directive';\r\nimport { HighlightOptions } from './highlight.model';\r\nimport { OPTIONS } from './highlight.token';\r\n\r\n@NgModule({\r\n  declarations: [HighlightDirective],\r\n  exports: [HighlightDirective]\r\n})\r\nexport class HighlightModule {\r\n  static forRoot(options?: HighlightOptions): ModuleWithProviders {\r\n    return {\r\n      ngModule: HighlightModule,\r\n      providers: [\r\n        {provide: OPTIONS, useValue: options}\r\n      ]\r\n    };\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}
