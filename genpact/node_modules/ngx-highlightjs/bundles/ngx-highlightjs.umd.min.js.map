{"version":3,"sources":["node_modules/tslib/tslib.es6.js","ng://ngx-highlightjs/lib/highlight.token.ts","ng://ngx-highlightjs/lib/highlight.service.ts","ng://ngx-highlightjs/lib/highlight.directive.ts","ng://ngx-highlightjs/lib/highlight.module.ts"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","OPTIONS","InjectionToken","HighlightJS","options","_document","this","theme","path","auto","_isReady$","BehaviorSubject","_hljsLoader","subscribe","defineProperty","pipe","filter","isReady","take","highlight","name","value","ignore_illegals","continuation","hljs","highlightAuto","languageSubset","fixMarkup","highlightBlock","block","configure","config","initHighlighting","initHighlightingOnLoad","registerLanguage","language","listLanguages","getLanguage","defaultView","_initHLJS","_themeLoader","_loadScript","_this","promise","Promise","resolve","script","createElement","async","type","onload","src","head","appendChild","from","switchMap","style","rel","href","of","tap","next","Injectable","args","providedIn","Optional","Inject","DOCUMENT","HighlightDirective","el","renderer","highlighted","EventEmitter","nativeElement","code","highlightElement","ngOnInit","highlightTextContent","domObs","MutationObserver","observe","childList","subtree","highlightChildren","tagName","toLowerCase","innerText","trim","console","warn","res","innerHTML","addClass","setProperty","emit","selector","codeElements","querySelectorAll","childNodes","nodeName","map","codeElement","ngOnDestroy","disconnect","Directive","ElementRef","Renderer2","Input","Output","HighlightModule","forRoot","ngModule","providers","provide","useValue","NgModule","declarations","exports"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = Object.setPrototypeOf ||\r\n    ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n    function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = Object.assign || function __assign(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n    }\r\n    return t;\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [0, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r);  }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { if (o[n]) i[n] = function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; }; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator];\r\n    return m ? m.call(o) : typeof __values === \"function\" ? __values(o) : o[Symbol.iterator]();\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import { InjectionToken } from '@angular/core';\r\nimport { HighlightOptions } from './highlight.model';\r\n\r\nexport const OPTIONS = new InjectionToken<HighlightOptions>('OPTIONS');\r\n","import { Injectable, Inject, Optional } from '@angular/core';\r\nimport { DOCUMENT } from '@angular/common';\r\nimport { BehaviorSubject, Observable, from, of } from 'rxjs';\r\nimport { take, filter, tap, switchMap } from 'rxjs/operators';\r\nimport { HighlightConfig, HighlightOptions, HighlightResult } from './highlight.model';\r\nimport { OPTIONS } from './highlight.token';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class HighlightJS {\r\n\r\n  hljs: any;\r\n\r\n  options: HighlightOptions = {\r\n    theme: 'github',\r\n    path: 'assets/lib/hljs',\r\n    auto: true\r\n  };\r\n\r\n  private _isReady$ = new BehaviorSubject(false);\r\n\r\n  // Stream that emits when highlightjs is loaded\r\n  get isReady(): Observable<boolean> {\r\n    return this._isReady$.pipe(\r\n      filter(isReady => isReady),\r\n      take(1)\r\n    );\r\n  }\r\n\r\n  constructor(@Optional() @Inject(OPTIONS) options: HighlightOptions,\r\n              @Inject(DOCUMENT) private _document: any) {\r\n    this.options = { ...this.options, ...options };\r\n    this._hljsLoader().subscribe();\r\n  }\r\n\r\n  highlight(name: string, value: string, ignore_illegals: boolean, continuation?: any): HighlightResult {\r\n    if (this.hljs) {\r\n      return this.hljs.highlight(name, value, ignore_illegals, continuation);\r\n    }\r\n  }\r\n\r\n  highlightAuto(value: string, languageSubset: string[]): HighlightResult {\r\n    if (this.hljs) {\r\n      return this.hljs.highlightAuto(value, languageSubset);\r\n    }\r\n  }\r\n\r\n  fixMarkup(value: string): string {\r\n    if (this.hljs) {\r\n      return this.hljs.fixMarkup(value);\r\n    }\r\n  }\r\n\r\n  highlightBlock(block: HTMLElement) {\r\n    if (this.hljs) {\r\n      this.hljs.highlightBlock(block);\r\n    }\r\n  }\r\n\r\n  configure(config: HighlightConfig) {\r\n    if (this.hljs) {\r\n      this.hljs.configure(config);\r\n    }\r\n  }\r\n\r\n  initHighlighting() {\r\n    if (this.hljs) {\r\n      this.hljs.initHighlighting();\r\n    }\r\n  }\r\n\r\n  initHighlightingOnLoad() {\r\n    if (this.hljs) {\r\n      this.hljs.initHighlightingOnLoad();\r\n    }\r\n  }\r\n\r\n  registerLanguage(name: string, language: Function) {\r\n    if (this.hljs) {\r\n      this.hljs.registerLanguage(name, language);\r\n    }\r\n  }\r\n\r\n  listLanguages(): string[] {\r\n    if (this.hljs) {\r\n      return this.hljs.listLanguages();\r\n    }\r\n  }\r\n\r\n  getLanguage(name: string): any {\r\n    if (this.hljs) {\r\n      return this.hljs.getLanguage(name);\r\n    }\r\n  }\r\n\r\n  private _hljsLoader(): Observable<any> {\r\n    if (this._document.defaultView.hljs) {\r\n      return this._initHLJS();\r\n    } else {\r\n      this._themeLoader().subscribe();\r\n      return this._loadScript();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Load hljs script\r\n   */\r\n  private _loadScript(): Observable<any> {\r\n    const promise = new Promise((resolve) => {\r\n      const script = this._document.createElement('script');\r\n      script.async = true;\r\n      script.type = 'text/javascript';\r\n      script.onload = resolve;\r\n      script.src = `${this.options.path}/highlight.pack.js`;\r\n      this._document.head.appendChild(script);\r\n    });\r\n    return from(promise).pipe(\r\n      switchMap(() => this._initHLJS())\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Load hljs theme\r\n   */\r\n  private _themeLoader(): Observable<any> {\r\n    const promise = new Promise((resolve) => {\r\n      const style = this._document.createElement('link');\r\n      style.rel = 'stylesheet';\r\n      style.type = 'text/css';\r\n      style.onload = resolve;\r\n      style.href = `${this.options.path}/styles/${this.options.theme}.css`;\r\n      this._document.head.appendChild(style);\r\n    });\r\n    return from(promise);\r\n  }\r\n\r\n  /**\r\n   * Initialize hljs on load\r\n   */\r\n  private _initHLJS() {\r\n    return of({}).pipe(\r\n      tap(() => {\r\n        this.hljs = this._document.defaultView.hljs;\r\n        this.hljs.configure(this.options.config);\r\n        this._isReady$.next(true);\r\n      })\r\n    );\r\n  }\r\n}\r\n","import { Directive, ElementRef, Renderer2, OnDestroy, Input, Output, EventEmitter, OnInit } from '@angular/core';\r\nimport { from } from 'rxjs';\r\nimport { map, take, filter } from 'rxjs/operators';\r\nimport { HighlightJS } from './highlight.service';\r\nimport { HighlightResult } from './highlight.model';\r\n\r\n/** There are 2 ways to higlight a code\r\n *  1 - using the [code] input (default) <code highlight [code]=\"yourCode\"></code>\r\n *  2 - using element text content <code> {{yourCode}} </code>\r\n */\r\n\r\n@Directive({\r\n  selector: '[highlight]'\r\n})\r\nexport class HighlightDirective implements OnInit, OnDestroy {\r\n\r\n  el: HTMLElement;\r\n  domObs: MutationObserver;\r\n  code: string;\r\n  @Input() highlight: string;\r\n  @Input() language: string[];\r\n  @Input('code')\r\n  set setCode(code: string) {\r\n    this.code = code;\r\n    this.hljs.isReady.subscribe(() => this.highlightElement(this.el, code));\r\n  }\r\n\r\n  @Output() highlighted = new EventEmitter<HighlightResult>();\r\n\r\n  constructor(el: ElementRef, private renderer: Renderer2, private hljs: HighlightJS) {\r\n    this.el = el.nativeElement;\r\n  }\r\n\r\n  ngOnInit() {\r\n\r\n    /** Acitvate MutationObserver if `auto` option is true and `[code]` input is not used\r\n     * This will highlight using the text content */\r\n    if (!this.code && this.hljs.options.auto) {\r\n\r\n      this.hljs.isReady.subscribe(() => {\r\n        this.highlightTextContent();\r\n\r\n        /** Highlight when text content changes */\r\n        this.domObs = new MutationObserver(() => this.highlightTextContent());\r\n        this.domObs.observe(this.el, { childList: true, subtree: true });\r\n      });\r\n    }\r\n  }\r\n\r\n  /** Highlight using element text content */\r\n  highlightTextContent() {\r\n    if (!this.highlight) {\r\n      if (this.el.tagName.toLowerCase() === 'code') {\r\n        this.highlightElement(this.el, this.el.innerText.trim());\r\n      } else {\r\n        console.warn(`[HighlightDirective]: Use 'highlight' on <code> element only`);\r\n      }\r\n    } else if (this.highlight === 'all') {\r\n      this.highlightChildren(this.el, 'pre code');\r\n    } else {\r\n      this.highlightChildren(this.el, this.highlight);\r\n    }\r\n  }\r\n\r\n  /** Highlight a code block */\r\n  highlightElement(el: HTMLElement, code: string) {\r\n\r\n    const res: HighlightResult = this.hljs.highlightAuto(code, this.language);\r\n    if (res.value !== el.innerHTML) {\r\n      this.renderer.addClass(el, 'hljs');\r\n      this.renderer.setProperty(el, 'innerHTML', res.value);\r\n      this.highlighted.emit(res);\r\n    }\r\n  }\r\n\r\n  /** Highlight multiple code blocks */\r\n  highlightChildren(el: HTMLElement, selector: string) {\r\n\r\n    const codeElements = el.querySelectorAll(selector);\r\n\r\n    /** highlight children with the same selector */\r\n    from(codeElements).pipe(\r\n      filter((code: HTMLElement) => code.childNodes.length === 1 && code.childNodes[0].nodeName === '#text'),\r\n      map((codeElement: HTMLElement) => this.highlightElement(codeElement, codeElement.innerText.trim())),\r\n      take(1)\r\n    ).subscribe();\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    /** Disconnect MutationObserver */\r\n    if (!this.code && this.hljs.options.auto) {\r\n      this.domObs.disconnect();\r\n    }\r\n  }\r\n}\r\n","import { ModuleWithProviders, NgModule } from '@angular/core';\r\nimport { HighlightDirective } from './highlight.directive';\r\nimport { HighlightOptions } from './highlight.model';\r\nimport { OPTIONS } from './highlight.token';\r\n\r\n@NgModule({\r\n  declarations: [HighlightDirective],\r\n  exports: [HighlightDirective]\r\n})\r\nexport class HighlightModule {\r\n  static forRoot(options?: HighlightOptions): ModuleWithProviders {\r\n    return {\r\n      ngModule: HighlightModule,\r\n      providers: [\r\n        {provide: OPTIONS, useValue: options}\r\n      ]\r\n    };\r\n  }\r\n}\r\n"]}